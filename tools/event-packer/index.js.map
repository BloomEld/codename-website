{"version":3,"file":"index.uncompressed.js","names":["readFile","file","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsText","document","getElementById","addEventListener","e","preventDefault","eventFile","files","eventParams","eventImage","promises","push","name","endsWith","split","img","Image","canvas","createElement","width","height","getContext","drawImage","pngDataUrl","toDataURL","src","readAsDataURL","all","then","hscriptText","jsonFileText","imageDataURL","content","filename","blob","link","toPack","join","replace","Blob","type","href","URL","createObjectURL","download","body","appendChild","click","removeChild","catch","error","console"],"sources":["index.uncompressed.js"],"sourcesContent":["(function () {\nvar form = document.getElementById(\"event-packer-form\");\nform.addEventListener(\"submit\", function (e) {\n\te.preventDefault();\n\n\tvar eventFile = document.getElementById(\"event-file\").files[0];\n\tvar eventParams = document.getElementById(\"event-params\").files[0];\n\tvar eventImage = document.getElementById(\"event-image\").files[0];\n\tvar separator = '________PACKSEP________';\n\n\tvar promises = [readFile(eventFile), readFile(eventParams)];\n\tif(eventImage) {\n\t\tpromises.push(getImageBase64(eventImage));\n\t}\n\n\t// TODO: add compression by converting 4 spaces to tabs, and more\n\n\tPromise.all(promises)\n\t\t.then(([hscriptText, jsonFileText, imageDataURL]) => {\n\t\t\t//if(!imageDataURL) {\n\t\t\t//\timageDataURL = \"assets/images/editors/charter/event-icons/Unknown.png\";\n\t\t\t//}\n\t\t\tvar toPack = [\n\t\t\t\teventFile.name,\n\t\t\t\thscriptText,\n\t\t\t\tjsonFileText\n\t\t\t];\n\t\t\tif(imageDataURL) {\n\t\t\t\ttoPack.push(imageDataURL);\n\t\t\t}\n\n\t\t\tvar packText = toPack.join(separator);\n\n\t\t\tsaveFile(packText, eventFile.name.replace(/\\.(hx|hscript|hxs|hsc)$/, \".pack\"));\n\t\t})\n\t\t.catch(error => console.error(\"Error processing files:\", error));\n});\n\nfunction readFile(file) {\n\treturn new Promise((resolve, reject) => {\n\t\tvar reader = new FileReader();\n\t\treader.onload = () => resolve(reader.result);\n\t\treader.onerror = reject;\n\t\treader.readAsText(file);\n\t});\n}\n\nfunction getImageBase64(file) {\n\treturn new Promise((resolve, reject) => {\n\t\tvar reader = new FileReader();\n\t\treader.onload = function () {\n\t\t\tif(!file.name.endsWith(\".png\")) {\n\t\t\t\tvar img = new Image();\n\t\t\t\timg.onload = function () {\n\t\t\t\t\tvar canvas = document.createElement(\"canvas\");\n\t\t\t\t\tcanvas.width = img.width;\n\t\t\t\t\tcanvas.height = img.height;\n\t\t\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\t\t\tctx.drawImage(img, 0, 0);\n\n\t\t\t\t\tvar pngDataUrl = canvas.toDataURL(\"image/png\");\n\t\t\t\t\tresolve(pngDataUrl.split(',')[1]);\n\t\t\t\t};\n\t\t\t\timg.onerror = reject;\n\t\t\t\timg.src = reader.result;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve(reader.result.split(',')[1]);\n\t\t\t}\n\t\t};\n\t\treader.onerror = reject;\n\t\treader.readAsDataURL(file); // Read the image as a Data URL\n\t});\n}\n\nfunction saveFile(content, filename) {\n\tvar blob = new Blob([content], { type: \"text/plain;charset=utf-8\" });\n\tvar link = document.createElement(\"a\");\n\tlink.href = URL.createObjectURL(blob);\n\tlink.download = filename;\n\tdocument.body.appendChild(link);\n\tlink.click();\n\tdocument.body.removeChild(link);\n}\n})();"],"mappings":"AAAA,MAsCA,SAASA,EAASC,GACjB,OAAO,IAAIC,SAAQ,CAACC,EAASC,KAC5B,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,IAAMJ,EAAQE,EAAOG,QACrCH,EAAOI,QAAUL,EACjBC,EAAOK,WAAWT,EAAK,GAEzB,CA5CWU,SAASC,eAAe,qBAC9BC,iBAAiB,UAAoBC,IACzCA,EAAEC,iBAEF,IA0CuBd,EA1CnBe,EAAYL,SAASC,eAAe,cAAcK,MAAM,GACxDC,EAAcP,SAASC,eAAe,gBAAgBK,MAAM,GAC5DE,EAAaR,SAASC,eAAe,eAAeK,MAAM,GAG1DG,EAAW,CAACpB,EAASgB,GAAYhB,EAASkB,IAC3CC,GACFC,EAASC,MAmCapB,EAnCOkB,EAoCvB,IAAIjB,SAAQ,CAACC,EAASC,KAC5B,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,KACf,GAAIN,EAAKqB,KAAKC,SAAS,QAgBtBpB,EAAQE,EAAOG,OAAOgB,MAAM,KAAK,QAhBF,CAC/B,IAAIC,EAAM,IAAIC,MACdD,EAAIlB,OAAS,KACZ,IAAIoB,EAAShB,SAASiB,cAAc,UACpCD,EAAOE,MAAQJ,EAAII,MACnBF,EAAOG,OAASL,EAAIK,OACVH,EAAOI,WAAW,MACxBC,UAAUP,EAAK,EAAG,GAEtB,IAAIQ,EAAaN,EAAOO,UAAU,aAClC/B,EAAQ8B,EAAWT,MAAM,KAAK,GAC/B,EACAC,EAAIhB,QAAUL,EACdqB,EAAIU,IAAM9B,EAAOG,MAClB,CAID,EACAH,EAAOI,QAAUL,EACjBC,EAAO+B,cAAcnC,EAAK,MAtD3BC,QAAQmC,IAAIjB,GACVkB,MAAK,EAAEC,EAAaC,EAAcC,MAIlC,IAqDeC,EAASC,EACtBC,EACAC,EAvDEC,EAAS,CACZ9B,EAAUM,KACViB,EACAC,GAEEC,GACFK,EAAOzB,KAAKoB,GA+CEC,EA5CAI,EAAOC,KAvBR,2BAmEUJ,EA1CL3B,EAAUM,KAAK0B,QAAQ,0BAA2B,SA2CnEJ,EAAO,IAAIK,KAAK,CAACP,GAAU,CAAEQ,KAAM,8BACnCL,EAAOlC,SAASiB,cAAc,MAC7BuB,KAAOC,IAAIC,gBAAgBT,GAChCC,EAAKS,SAAWX,EAChBhC,SAAS4C,KAAKC,YAAYX,GAC1BA,EAAKY,QACL9C,SAAS4C,KAAKG,YAAYb,EAjDsD,IAE9Ec,OAAMC,GAASC,QAAQD,MAAM,0BAA2BA,IAC3D,GAgDC,EApFD","ignoreList":[]}