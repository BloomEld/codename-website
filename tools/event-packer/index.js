(()=>{function e(e){return new Promise(((r,t)=>{var n=new FileReader;n.onload=()=>r(n.result),n.onerror=t,n.readAsText(e)}))}document.querySelector("form").addEventListener("submit",(r=>{r.preventDefault();var t,n=document.querySelector("#event-file").files[0],a=document.querySelector("#event-params").files[0],o=document.querySelector("#event-image").files[0],l=[e(n),e(a)];o&&l.push((t=o,new Promise(((e,r)=>{var n=new FileReader;n.onload=()=>{if(t.name.endsWith(".png"))e(n.result.split(",")[1]);else{var a=new Image;a.onload=()=>{var r=document.createElement("canvas");r.width=a.width,r.height=a.height,r.getContext("2d").drawImage(a,0,0);var t=r.toDataURL("image/png");e(t.split(",")[1])},a.onerror=r,a.src=n.result}},n.onerror=r,n.readAsDataURL(t)})))),Promise.all(l).then((([e,r,t])=>{var a,o,l,c,i=[n.name,e,r];t&&i.push(t),a=i.join("________PACKSEP________"),o=n.name.replace(/\.(hx|hscript|hxs|hsc)$/,".pack"),l=new Blob([a],{type:"text/plain;charset=utf-8"}),(c=document.createElement("a")).href=URL.createObjectURL(l),c.download=o,document.body.appendChild(c),c.click(),document.body.removeChild(c)})).catch((e=>console.error("Error processing files:",e)))}))})();